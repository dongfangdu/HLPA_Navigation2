import streamlit as st
import pandas as pd
from PIL import Image

def self_learning():
    st.title("è‡ªå­¦ä¹ ")

    # ================
    # æ¦‚è¿°
    # ================
    st.header("â™Ÿ æ¦‚è¿° â™Ÿ")
    st.write("æˆ‘ä»¬æä¾›äº†æ™ºèƒ½å¯¹è¯çš„è‡ªå­¦ä¹ èƒ½åŠ›ï¼Œæ–¹ä¾¿å¿«é€Ÿæ­å»ºä¸åŒåœºæ™¯çš„è¾ƒç®€å•æ¡ˆä¾‹\n")
    st.write("å¯¹äºå¤æ‚çš„å¯¹è¯æµç¨‹ï¼Œæˆ‘ä»¬å»ºè®®è¿›è¡Œå®šåˆ¶åŒ–")

    # ================
    # èƒ½åŠ›ä¼˜åŠ¿
    # ================
    st.header("â™Ÿ èƒ½åŠ›ä¼˜åŠ¿ â™Ÿ")

    st.write("ä¼ ç»Ÿçš„åµŒå¥—if-elseæµç¨‹ï¼Œæ³›åŒ–æ€§ä¸é«˜ï¼Œå¯¹è¯æµç¨‹è®¾è®¡é—¨æ§›é«˜ï¼ŒäººåŠ›ç»´æŠ¤æˆæœ¬å¤§\n")

    st.write("æˆ‘å¸å¯¹è¯ç®¡ç†èƒ½åŠ›å…·å¤‡çµæ´»çš„è‡ªå­¦ä¹ èƒ½åŠ›ï¼Œä¸»è¦å…·å¤‡ä»¥ä¸‹ä¼˜åŠ¿")
    st.markdown("* å·¥ç¨‹æ¡†æ¶å®Œæ•´ï¼Œæ­å»ºæ–¹å¼ç®€æ·")
    st.markdown("* å¤šæ¨¡æ”¯æ’‘ã€å°æ ·æœ¬å­¦ä¹ ã€è‡ªå­¦ä¹ èƒ½åŠ›")
    st.markdown("* æä¾›å…¨é“¾è·¯æ™ºèƒ½å¯¹è¯å»ºè®¾æœåŠ¡ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯ä¸åŒéƒ¨ç½²æ–¹å¼è¯‰æ±‚")

    # ================
    # è‡ªå­¦ä¹ æµç¨‹
    # ================
    st.header("â™Ÿ è‡ªå­¦ä¹ æµç¨‹ â™Ÿ")

    st.markdown("å¯¹äºéœ€è¦è¿›è¡Œè‡ªå­¦ä¹ çš„å®¢æˆ·ï¼Œæˆ‘ä»¬å»ºè®®å…¶æä¾›çš„æ•°æ®åŒ…æ‹¬")
    st.markdown("* æ„å›¾æ ‡å‡†å¥")
    st.markdown("* è¦ç´ æ ‡å‡†è¯")
    st.markdown("* è¯æœ¯é›†åˆ")
    st.markdown("* æ„å›¾ - è¯æœ¯æ‰§è¡Œå¯¹")

    st.table(pd.DataFrame({
        "å±æ€§": ["Intent_T", "Entity_T", "Template", "Action"],
        "ç±»å‹": ["List[Dict]", "List[Dict]", "List[Dict]", "List[Tuple[Intent,Template]]"],
        "è¯´æ˜": ["æ„å›¾æ ‡å‡†å¥", "è¦ç´ æ ‡å‡†è¯", "è¯æœ¯é›†åˆ", "æ„å›¾-è¯æœ¯æ‰§è¡Œå¯¹"],
        "æ˜¯å¦å¿…é¡»": ["æ˜¯", "å¦", "æ˜¯", "æ˜¯"],
        "æ ·ä¾‹": [[{"intent": "weather", "text": ["æŸ¥ä¸‹å¤©æ°”", "å¤©æ°”å¦‚ä½•"]}],
               [{"entity": "loc", "text": ["åŒ—äº¬", "æˆéƒ½"]}],
               [{"idx": "T1", "text": ["ä½ å¥½", "ä¸çŸ¥é“"]}],
               [("weather", "T1"), ("order", "T2")]]
    }))

    # ===============
    # æ ·ä¾‹ä½“éªŒ
    # ===============
    st.header("â™Ÿ æ ·ä¾‹ä½“éªŒ â™Ÿ")
    st.warning("ä½“éªŒç¯å¢ƒä»…æ”¯æŒæ ·ä¾‹è§£æï¼Œæš‚ä¸å¼€æ”¾è‡ªå®šä¹‰è¾“å…¥ï¼Œè¯·ä¸Šä¼ è®­ç»ƒæ–‡æœ¬å†è¿›è¡Œæ¨¡å‹éªŒè¯")

    default_samples_1 = pd.DataFrame({"intent": ["weather", "clock", "others"],
                                      "text": [["æŸ¥ä¸‹å¤©æ°”", "å¤©æ°”å¦‚ä½•"],
                                               ["å¸®æˆ‘è®¾ä¸ªæ˜æ—©7ç‚¹çš„é—¹é“ƒ",
                                                "2å°æ—¶å€™å«é†’æˆ‘"],
                                               ["çš„é˜¿å½“çš„å•Šå½“"]]})
    default_samples_2 = pd.DataFrame({"entity": ["loc", "time"],
                                      "text": [["åŒ—äº¬", "æˆéƒ½"],
                                               ["7ç‚¹", "ä¸Šåˆ"]]})
    default_samples_3 = pd.DataFrame({"idx": ["T1", "T2", "T3"],
                                      "template": [["{loc}çš„å¤©æ°”è‰¯å¥½", "{loc}æ¸©åº¦ä¸º20æ‘„æ°åº¦"],
                                                   ["å·²å®Œæˆ{time}çš„é—¹é“ƒè®¾ç½®", "å°†åœ¨{time}å”¤é†’æ‚¨"],
                                                   ["æŠ±æ­‰æˆ‘æ²¡å¬æ‡‚"]]})
    default_samples_4 = pd.DataFrame({"action": [("weather", "T1"),
                                                 ("order", "T2"),
                                                 ("others", "T3")]})

    default_query = "æˆ‘æƒ³é—®ä¸‹æ˜æ—©çš„å¤©æ°”å¦‚ä½•"
    default_answer = "æ­å·çš„å¤©æ°”è‰¯å¥½"

    if st.checkbox("ç‚¹å‡»æŸ¥çœ‹ä¸Šä¼ æ–‡æœ¬"):
        st.subheader("ğŸ•¹ æ„å›¾æ ‡å‡†å¥")
        st.table(default_samples_1)
        st.subheader("ğŸ•¹ è¦ç´ æ ‡å‡†è¯")
        st.table(default_samples_2)
        st.subheader("ğŸ•¹ è¯æœ¯é›†åˆ")
        st.table(default_samples_3)
        st.subheader("ğŸ•¹ æ„å›¾-è¯æœ¯æ‰§è¡Œå¯¹")
        st.table(default_samples_4)

    if st.button("ğŸ„ ç‚¹å‡»ä¸Šä¼ è®­ç»ƒæ–‡æœ¬"):
        st.success("ä¸Šä¼ æˆåŠŸ")
        st.success("è®­ç»ƒå®Œæˆ")

    if st.button("ğŸ„ ç‚¹å‡»éªŒè¯æ¨¡å‹"):
        st.success("è§£æå®Œæˆ")
        output_string = f"|User|Bot|\n"\
                        f"|---|---|\n"\
                        f"|{default_query}|{default_answer}|\n"
        st.markdown(output_string, unsafe_allow_html = True)

    # ===============
    # API æ¥å£æ–‡æ¡£
    # ===============
    st.header("â™Ÿ API æ¥å£æ–‡æ¡£ â™Ÿ")
    if st.checkbox("ç‚¹å‡»æŸ¥çœ‹ æ¥å£æ–‡æ¡£"):
        st.write("æœªå®Œæˆ\n")

    # ===============
    # å®šåˆ¶éœ€æ±‚
    # ===============
    st.header("â™Ÿ å®šåˆ¶éœ€æ±‚ â™Ÿ")
    if st.checkbox("ç‚¹å‡»æŸ¥çœ‹ å®šåˆ¶éœ€æ±‚"):
        st.write("å¯¹äºå¤æ‚çš„å¯¹è¯åœºæ™¯\n")
        st.write("æˆ‘ä»¬å»ºè®®åœºæ™¯å®šåˆ¶åŒ–")

if __name__ == "__main__":
    self_learning()